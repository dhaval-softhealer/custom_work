<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="ProductQtyPopup" owl="1">
        <div role="dialog" class="modal-dialog">
            <div class="popup popup-text popup-lg product-configurator-popup sh_warehouse_qty_popup">
                <header class="title">
                    <t t-esc="props.title" />
                </header>
                <div class="main-body touch-scrollable scrollable-y">
                    <t t-if="env and env.pos and env.pos.config and env.pos.config.sh_display_stock_from_other_companies and !env.pos.config.sh_show_qty_location">
                        <div class="section-inventory-body">
                            <!-- <t t-if="env and env.pos and env.pos.config and env.pos.config.sh_display_stock_from_other_companies"> -->
                                <t t-if="props.warehouse_detail.warehouse_company_wise">
                                    <table class="mobile-table sh-mobile-table">
                                        <t t-foreach="props.warehouse_detail.warehouse_company_wise" t-as="each_warehouse">
                                            <t t-if="env.pos.company.name and env.pos.company.name == each_warehouse">
                                                <tr class="sh_warehouse_company_name sh_warehouse_company_detail">
                                                    <td colspan="3">
                                                        <t t-esc="each_warehouse"/>
                                                    </td>
                                                </tr>
                                                <t t-foreach="props.warehouse_detail.warehouse_company_wise[each_warehouse]" t-as="warehouse">
                                                    <tr class="sh_warehouse_company_detail">
                                                        <td>
                                                            <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                                <span t-esc="warehouse.name" class="table-name sh_company_warehouse_name"/>:
                                                            </t>
                                                            <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                                <span t-esc="warehouse.location_name" class="table-name sh_company_warehouse_name"/>:
                                                            </t>
                                                        </td>
                                                        <td>
                                                            <span class="sh_qty_inventory_onhand">
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                                    <t t-esc="warehouse.available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                                </t>
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                                    <t t-esc="warehouse.location_available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                                </t>
                                                            </span>
                                                        </td>
                                                        <td>
                                                            <span class="sh_qty_inventory_forecasted">
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                                    <t t-esc="warehouse.forecasted_quantity"/> forecasted
                                                                </t>
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                                    <t t-esc="warehouse.location_forecasted_quantity"/> forecasted
                                                                </t>
                                                            </span>
                                                            
                                                        </td>
                                                    </tr>
                                                </t>
                                            </t>
                                        </t>

                                        <t t-foreach="props.warehouse_detail.warehouse_company_wise" t-as="each_warehouse">
                                            <t t-if="env.pos.company.name and env.pos.company.name != each_warehouse">
                                                <tr class="sh_warehouse_company_name sh_warehouse_company_detail">
                                                    <td colspan="3">
                                                        <t t-esc="each_warehouse"/>
                                                    </td>
                                                </tr>
                                                <t t-foreach="props.warehouse_detail.warehouse_company_wise[each_warehouse]" t-as="warehouse">
                                                    <tr class="sh_warehouse_company_detail">
                                                        <td>
                                                            <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                                <span t-esc="warehouse.name" class="table-name sh_company_warehouse_name"/>:
                                                            </t>
                                                            <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                                <span t-esc="warehouse.location_name" class="table-name sh_company_warehouse_name"/>:
                                                            </t>
                                                        </td>
                                                        <td>
                                                            <span class="sh_qty_inventory_onhand">
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                                    <t t-esc="warehouse.available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                                </t>
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                                    <t t-esc="warehouse.location_available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                                </t>
                                                            </span>
                                                            
                                                        </td>
                                                        <td>
                                                            <span class="sh_qty_inventory_forecasted">
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                                    <t t-esc="warehouse.forecasted_quantity"/> forecasted
                                                                </t>
                                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                                    <t t-esc="warehouse.location_forecasted_quantity"/> forecasted
                                                                </t>
                                                            </span>
                                                            
                                                        </td>
                                                    </tr>
                                                </t>
                                            </t>
                                        </t>

                                    </table>
                                </t>
                            <!-- </t> -->
                        </div>
                    </t>
                    <t t-if="env and env.pos and env.pos.config and !env.pos.config.sh_display_stock_from_other_companies and env.pos.config.sh_show_qty_location">
                        <t t-raw="props.body" />
                    </t>
                </div>
                <footer class="footer">
                    <div class="button cancel" t-on-click="cancel">
                        Cancel
                    </div>
                </footer>
            </div>
        </div>
    </t>

    <t t-name="QuantityWarningPopup" owl="1">
        <div role="dialog" class="modal-dialog">
            <div class="popup popup-text popup-lg product-configurator-popup sh_qty_popup">
                <header class="title">
                    Warning
                </header>
                <div class="main-body touch-scrollable scrollable-y product_content">
                    <t t-if="props.product">
                        <div class="sh_product_image">
                            <img t-att-src="props.product_image" alt="Product image" class="product_image" />
                        </div>
                        <div class="sh_product_name">
                            <t t-esc="props.product.display_name" />
                            <div class="sh_max_qty">Minimum availabe quantity is <t t-esc="env.pos.config.sh_min_qty" /></div>
                        </div>
                    </t>
                </div>
                <footer class="footer sh_warning_footer">
                    <div class="button order sh_order_button" style="width: 110px;height: 40px;line-height: 40px; color: #fff;padding-bottom: 0px;border-width: 2px;" t-on-click="put_order">
                        Order
                    </div>
                    <div class="button cancel" t-on-click="cancel">
                        Cancel
                    </div>
                </footer>
            </div>
        </div>
    </t>

    <t t-extend="ProductItem" t-inherit="point_of_sale.ProductItem" t-inherit-mode="extension">
        <xpath expr="//span[hasclass('price-tag')]" position="before">
            <t t-if="env.pos.config.sh_show_qty_location and props.product.type=='product' and !env.pos.config.sh_display_stock_from_other_companies">
                <span class="sh_warehouse_display">
                    <t t-esc="props.product.sh_pos_stock" />
                </span>
            </t>
        </xpath>     
    </t>

    <t t-extend="ProductInfoPopup" t-inherit="point_of_sale.ProductInfoPopup" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('section-inventory-body')]" position="replace">
            <div class="section-inventory-body">
                <t t-if="env and env.pos and env.pos.config and env.pos.config.sh_display_stock_from_other_companies">
                    <t t-if="productInfo.warehouse_company_wise">
                        <table class="mobile-table sh-mobile-table">
                            <t t-foreach="productInfo.warehouse_company_wise" t-as="each_warehouse">
                                <t t-if="env.pos.company.name and env.pos.company.name == each_warehouse">
                                    <tr class="sh_warehouse_company_name">
                                        <td colspan="3">
                                            <t t-esc="each_warehouse"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="productInfo.warehouse_company_wise[each_warehouse]" t-as="warehouse">
                                        <tr>
                                            <td>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                    <span t-esc="warehouse.name" class="table-name"/>:
                                                </t>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                    <span t-esc="warehouse.location_name" class="table-name"/>:
                                                </t>
                                            </td>
                                            <td>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                    <t t-esc="warehouse.available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                </t>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                    <t t-esc="warehouse.location_available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                </t>
                                            </td>
                                            <td>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                    <t t-esc="warehouse.forecasted_quantity"/> forecasted
                                                </t>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                    <t t-esc="warehouse.location_forecasted_quantity"/> forecasted
                                                </t>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </t>

                            <t t-foreach="productInfo.warehouse_company_wise" t-as="each_warehouse">
                                <t t-if="env.pos.company.name and env.pos.company.name != each_warehouse">
                                    <tr class="sh_warehouse_company_name">
                                        <td colspan="3">
                                            <t t-esc="each_warehouse"/>
                                        </td>
                                    </tr>
                                    <t t-foreach="productInfo.warehouse_company_wise[each_warehouse]" t-as="warehouse">
                                        <tr>
                                            <td>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                    <span t-esc="warehouse.name" class="table-name"/>:
                                                </t>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                    <span t-esc="warehouse.location_name" class="table-name"/>:
                                                </t>
                                            </td>
                                            <td>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                    <t t-esc="warehouse.available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                </t>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                    <t t-esc="warehouse.location_available_quantity"/> <t t-esc="warehouse.uom"/> available,
                                                </t>
                                            </td>
                                            <td>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'warehouse'">
                                                    <t t-esc="warehouse.forecasted_quantity"/> forecasted
                                                </t>
                                                <t t-if="env.pos.config.sh_display_by and env.pos.config.sh_display_by == 'location'">
                                                    <t t-esc="warehouse.location_forecasted_quantity"/> forecasted
                                                </t>
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </t>

                        </table>
                    </t>
                </t>
                <t t-else="">
                    <table class="mobile-table">
                        <t t-foreach="productInfo.warehouses" t-as="warehouse" t-key="warehouse.name">
                            <tr>
                                <td><span t-esc="warehouse.name" class="table-name"/>:</td>
                                <td><t t-esc="warehouse.available_quantity"/> <t t-esc="warehouse.uom"/> available,</td>
                                <td><t t-esc="warehouse.forecasted_quantity"/> forecasted</td>
                            </tr>
                        </t>
                    </table>
                </t>
            </div>
        </xpath>
    </t>
    
</templates>
